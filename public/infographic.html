<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Joy Mila Enterprises (Pty) Ltd vs SSA Investments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script>
      // Simple authentication check
      (function () {
        const token = localStorage.getItem("authToken");
        if (!token) {
          // Redirect to login if no token
          window.location.href = "/login";
          return;
        }

        // Add token to current page request
        const currentUrl = window.location.href;
        if (
          currentUrl === window.location.origin + "/" ||
          currentUrl === window.location.origin + "/infographics/"
        ) {
          // Reload the page with the authorization header
          const xhr = new XMLHttpRequest();
          xhr.open("GET", window.location.href, true);
          xhr.setRequestHeader("Authorization", `Bearer ${token}`);
          xhr.onload = function () {
            if (xhr.status === 200) {
              document.open();
              document.write(xhr.responseText);
              document.close();
            } else {
              window.location.href = "/login";
            }
          };
          xhr.onerror = function () {
            window.location.href = "/login";
          };
          xhr.send();
        }
      })();
    </script>
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .gradient-text {
        background: linear-gradient(
          to right,
          #41824a,
          #60a5fa
        ); /* Adjusted blue for better visibility */
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }
    </style>
  </head>
  <body class="antialiased bg-[#1E293B] text-gray-300">
    <div class="container mx-auto px-4 py-8 md:py-12">
      <div class="absolute top-6 right-6 z-50">
        <div class="relative">
          <button
            id="userMenuBtn"
            class="bg-slate-700 p-3 rounded-full shadow-lg border border-slate-600 hover:shadow-xl transition-shadow focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#41824A] focus:ring-offset-slate-800"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-[#41824A]"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
          </button>
          <div
            id="userMenuContent"
            class="hidden absolute right-0 mt-2 w-56 origin-top-right bg-slate-800 rounded-lg shadow-lg border border-slate-700 ring-1 ring-black ring-opacity-5 z-50"
          >
            <div
              class="py-1"
              role="menu"
              aria-orientation="vertical"
              aria-labelledby="options-menu"
            >
              <div class="px-4 py-3 border-b border-slate-700">
                <p class="text-sm font-semibold text-gray-200">Welcome</p>
                <p class="text-sm text-gray-400 truncate" id="userName">User</p>
              </div>
              <a
                href="#"
                id="documentsLink"
                style="display: none"
                class="flex items-center gap-3 px-4 py-2 text-sm text-gray-300 hover:bg-slate-700"
                role="menuitem"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                  />
                </svg>
                Documents Library
              </a>
              <a
                href="#"
                id="logoutBtn"
                class="flex items-center gap-3 px-4 py-2 text-sm text-red-400 hover:bg-slate-700"
                role="menuitem"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  />
                </svg>
                Log Out
              </a>
            </div>
          </div>
        </div>
      </div>

      <header class="text-center mb-12 md:mb-16">
        <div
          class="inline-block bg-slate-800 p-3 rounded-xl shadow-md border border-slate-700 mb-6"
        >
          <img
            src="logo.jpg"
            alt="Joy Mila Enterprises Logo"
            class="h-16 w-auto"
          />
        </div>
        <h1
          class="text-4xl md:text-6xl font-extrabold text-white mb-2 tracking-tight"
        >
          Legal Analysis
        </h1>
        <p class="text-lg md:text-xl text-gray-400">
          Joy Mila Enterprises (Pty) Ltd vs. SSA Investments (Pty) Ltd
        </p>
      </header>

      <main class="space-y-16">
        <section
          id="overview"
          class="mb-12 md:mb-16 bg-slate-800/50 p-8 rounded-2xl shadow-lg border border-slate-700"
        >
          <div class="text-center">
            <p
              class="text-md text-gray-400 mb-2 uppercase tracking-widest font-semibold"
            >
              Amount Claimed
            </p>
            <p
              class="text-6xl md:text-8xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[#41824a] to-blue-400"
            >
              R446,846.70
            </p>
            <p
              class="mt-6 text-lg text-gray-300 max-w-3xl mx-auto leading-relaxed"
            >
              This strategic analysis presents our litigation approach based on
              available evidence and legal principles. While no outcome can be
              guaranteed, our position is not weak but will require additional
              evidence to be obtained by the client.
            </p>
          </div>
        </section>

        <section
          id="deep-dive"
          class="bg-slate-800 p-6 sm:p-8 rounded-2xl shadow-xl border border-slate-700"
        >
          <h2
            class="text-3xl md:text-4xl font-bold text-center mb-8 gradient-text"
          >
            Legal Analysis: Jurisdiction & Merits
          </h2>
          <div
            class="flex justify-center bg-slate-900 p-1.5 rounded-xl max-w-md mx-auto mb-8"
          >
            <button
              id="tab-jurisdiction"
              class="w-1/2 text-sm md:text-base font-bold py-3 px-6 rounded-lg focus:outline-none transition-colors bg-[#41824a] text-white"
            >
              Legal Analysis: Jurisdiction
            </button>
            <button
              id="tab-merits"
              class="w-1/2 text-sm md:text-base font-bold py-3 px-6 rounded-lg focus:outline-none transition-colors text-gray-300 hover:bg-slate-700"
            >
              Legal Analysis: Merits
            </button>
          </div>

          <div id="content-jurisdiction">
            <p
              class="text-center text-gray-400 mb-10 max-w-3xl mx-auto text-lg"
            >
              Our jurisdictional argument is based on established legal
              principles and the factual circumstances of this case. We presume
              the Defendant will argue that the case belongs in Cape Town,
              claiming that the agreement was entered into in Cape Town and
              their registered address is in Knysna.
            </p>
            <div
              class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-2 p-4"
            >
              <div
                class="bg-slate-900/50 p-5 rounded-lg border border-slate-700 text-center flex-grow min-w-[160px]"
              >
                <p class="font-bold text-lg text-white">Performance</p>
                <p class="text-sm text-gray-400">
                  All 41 deliveries occurred in
                </p>
                <p class="font-bold text-[#41824a] text-xl">Gqeberha</p>
              </div>
              <div
                class="text-2xl font-semibold text-[#41824a] transform rotate-90 md:rotate-0 mx-4"
              >
                +
              </div>
              <div
                class="bg-slate-900/50 p-5 rounded-lg border border-slate-700 text-center flex-grow min-w-[160px]"
              >
                <p class="font-bold text-lg text-white">Payment</p>
                <p class="text-sm text-gray-400">
                  Common law dictates payment is due at the creditor's business
                  in
                </p>
                <p class="font-bold text-[#41824a] text-xl">Gqeberha</p>
              </div>
              <div
                class="text-2xl font-semibold text-[#41824a] transform rotate-90 md:rotate-0 mx-4"
              >
                →
              </div>
              <div
                class="bg-[#41824a] p-5 rounded-lg border border-green-400 text-center flex-grow min-w-[160px]"
              >
                <p class="font-bold text-lg text-white">Conclusion</p>
                <p class="text-sm text-white/90">
                  The cause of action arose here, locking jurisdiction in the
                </p>
                <p class="font-bold text-white text-xl">Gqeberha High Court</p>
              </div>
            </div>
          </div>

          <div id="content-merits" class="hidden">
            <p
              class="text-center text-gray-400 mb-10 max-w-3xl mx-auto text-lg"
            >
              Currently we only have invoices. Additional evidence including
              WhatsApp messages, emails, SMSes, delivery notes, and witness
              testimony will need to be obtained to support our claims.
            </p>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              <div
                class="p-5 rounded-lg bg-slate-900/50 border border-slate-700"
              >
                <h4 class="font-bold text-white">1. Proving the Agreement</h4>
                <p class="text-sm text-gray-400 mt-1">
                  Witness testimony from parties involved in the formation of
                  the oral agreement will be required. If there are witnesses
                  other than the person who represented the client, they must be
                  available to give evidence.
                </p>
              </div>
              <div
                class="p-5 rounded-lg bg-slate-900/50 border border-slate-700"
              >
                <h4 class="font-bold text-white">2. Proving Authority</h4>
                <p class="text-sm text-gray-400 mt-1">
                  Evidence of Mr Xhonxa's authority may be established through
                  his actions and the company's acceptance of deliveries,
                  subject to available evidence.
                </p>
              </div>
              <div
                class="p-5 rounded-lg bg-slate-900/50 border border-slate-700"
              >
                <h4 class="font-bold text-white">3. Proving the Terms</h4>
                <p class="text-sm text-gray-400 mt-1">
                  The 30-day payment term may be evidenced by invoices and the
                  established business relationship, subject to available
                  evidence.
                </p>
              </div>
              <div
                class="p-5 rounded-lg bg-slate-900/50 border border-slate-700 sm:col-span-2 lg:col-span-1"
              >
                <h4 class="font-bold text-white">4. Proving Performance</h4>
                <p class="text-sm text-gray-400 mt-1">
                  We do not have delivery notes yet. There may be some available but none have been provided to the lawyers. Purchase orders are also not yet available.
                </p>
              </div>
              <div
                class="p-5 rounded-lg bg-slate-900/50 border border-slate-700"
              >
                <h4 class="font-bold text-white">5. Proving the Quantum</h4>
                <p class="text-sm text-gray-400 mt-1">
                  Our complete set of invoices provides a clear, auditable trail
                  to the final amount claimed.
                </p>
              </div>
            </div>
          </div>
        </section>

        <section id="roadmap">
          <div
            class="bg-slate-800 rounded-2xl shadow-xl p-6 md:p-8 border border-slate-700"
          >
            <h2
              class="text-3xl sm:text-4xl font-bold text-center gradient-text mb-2"
            >
              Procedural Roadmap
            </h2>
            <p class="text-center text-lg text-gray-400 mb-10">
              Anticipated procedural steps and potential outcomes based on
              typical litigation patterns.
            </p>
            <div class="relative w-full p-4">
              <div
                class="absolute left-6 top-0 h-full w-0.5 bg-slate-700"
              ></div>

              <div class="relative pl-16 mb-10">
                <div
                  class="absolute left-0 top-1.5 flex items-center justify-center w-10 h-10 rounded-full bg-[#41824a] text-white font-bold text-lg border-2 border-slate-700"
                >
                  1
                </div>
                <h3 class="text-xl font-bold text-white">Notice to Defend</h3>
                <p class="text-gray-400">
                  Defendant formally indicates their intention to oppose the
                  action.
                </p>
              </div>

              <div class="relative pl-16 mb-10">
                <div
                  class="absolute left-0 top-1.5 flex items-center justify-center w-10 h-10 rounded-full bg-[#41824a] text-white font-bold text-lg border-2 border-slate-700"
                >
                  2
                </div>
                <h3 class="text-xl font-bold text-white">
                  Special Plea (Jurisdiction)
                </h3>
                <p class="text-gray-400 mb-4">
                  Defendant will likely argue the case should be heard
                  elsewhere. This is their strongest preliminary move.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="border-l-4 border-blue-400 pl-4">
                    <h4 class="font-semibold text-[#41824a]">
                      Outcome A: Plea Dismissed
                    </h4>
                    <p class="text-sm text-gray-400">
                      The case proceeds on the merits in Gqeberha.
                      <strong class="text-gray-300">High probability.</strong>
                    </p>
                  </div>
                  <div class="border-l-4 border-slate-600 pl-4">
                    <h4 class="font-semibold text-gray-300">
                      Outcome B: Plea Upheld
                    </h4>
                    <p class="text-sm text-gray-400">
                      We re-issue summons in the Western Cape, causing delay but
                      not ending the claim.
                      <strong class="text-gray-300">Low probability.</strong>
                    </p>
                  </div>
                </div>
              </div>

              <div class="relative pl-16 mb-10">
                <div
                  class="absolute left-0 top-1.5 flex items-center justify-center w-10 h-10 rounded-full bg-[#41824a] text-white font-bold text-lg border-2 border-slate-700"
                >
                  3
                </div>
                <h3 class="text-xl font-bold text-white">Plea on the Merits</h3>
                <p class="text-gray-400">
                  Defendant files their formal defence, denying the agreement,
                  performance, and quantum.
                </p>
              </div>

              <div class="relative pl-16">
                <div
                  class="absolute left-0 top-1.5 flex items-center justify-center w-10 h-10 rounded-full bg-[#41824a] text-white font-bold text-lg border-2 border-slate-700"
                >
                  4
                </div>
                <h3 class="text-xl font-bold text-white">Discovery & Trial</h3>
                <p class="text-gray-400">
                  Both parties exchange evidence. The matter proceeds to trial
                  where our superior documentary evidence will prevail.
                </p>
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer class="mt-16 pt-8 border-t border-slate-700">
        <h2 class="text-2xl font-bold text-center gradient-text mb-8">
          Next Steps
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
          <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
              <svg
                class="w-6 h-6 mr-2 text-[#41824A]"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
              Legal Team Responsibilities
            </h3>
            <ul class="text-gray-300 space-y-2">
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Issue and serve summons on Defendant at both addresses (Kuyasa
                and Motherwell)
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Prepare and file pleadings
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Conduct legal research and case preparation
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Represent client in court proceedings
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Manage discovery and evidence exchange
              </li>
            </ul>
          </div>

          <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
              <svg
                class="w-6 h-6 mr-2 text-[#41824A]"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                ></path>
              </svg>
              Client Responsibilities
            </h3>
            <ul class="text-gray-300 space-y-2">
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Provide all relevant documentation (WhatsApp messages, emails,
                SMSes, delivery notes)
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Make witnesses available for testimony (drivers, order takers,
                agreement formation witnesses)
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Attend court hearings as required
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Pay deposits timeously
              </li>
              <li class="flex items-start">
                <span class="text-[#41824A] mr-2">•</span>
                Maintain open communication with legal team
              </li>
            </ul>
          </div>
        </div>
      </footer>
    </div>

    <script>
      const tabJurisdiction = document.getElementById("tab-jurisdiction");
      const tabMerits = document.getElementById("tab-merits");
      const contentJurisdiction = document.getElementById(
        "content-jurisdiction"
      );
      const contentMerits = document.getElementById("content-merits");

      // Tab switching logic for dark mode
      tabJurisdiction.addEventListener("click", () => {
        tabJurisdiction.classList.add("bg-[#41824a]", "text-white");
        tabJurisdiction.classList.remove("text-gray-300", "hover:bg-slate-700");

        tabMerits.classList.add("text-gray-300", "hover:bg-slate-700");
        tabMerits.classList.remove("bg-[#41824a]", "text-white");

        contentJurisdiction.classList.remove("hidden");
        contentMerits.classList.add("hidden");
      });

      tabMerits.addEventListener("click", () => {
        tabMerits.classList.add("bg-[#41824a]", "text-white");
        tabMerits.classList.remove("text-gray-300", "hover:bg-slate-700");

        tabJurisdiction.classList.add("text-gray-300", "hover:bg-slate-700");
        tabJurisdiction.classList.remove("bg-[#41824a]", "text-white");

        contentMerits.classList.remove("hidden");
        contentJurisdiction.classList.add("hidden");
      });

      // User Menu Functionality
      const userMenuBtn = document.getElementById("userMenuBtn");
      const userMenuContent = document.getElementById("userMenuContent");
      const documentsLink = document.getElementById("documentsLink");
      const logoutBtn = document.getElementById("logoutBtn");
      const userName = document.getElementById("userName");

      // Get user info from localStorage or token
      function getUserInfo() {
        const token = localStorage.getItem("authToken");
        if (token) {
          try {
            // Decode JWT token to get user info (this is a simplified version)
            const payload = JSON.parse(atob(token.split(".")[1]));
            return {
              name: payload.name || payload.username || payload.sub || "User",
              role: payload.role || "user",
            };
          } catch (e) {
            // Fallback: try to get username from URL params or localStorage
            const urlParams = new URLSearchParams(window.location.search);
            const username =
              urlParams.get("username") ||
              localStorage.getItem("username") ||
              "User";
            return { name: username, role: "user" };
          }
        }
        // Fallback: try to get username from URL params or localStorage
        const urlParams = new URLSearchParams(window.location.search);
        const username =
          urlParams.get("username") ||
          localStorage.getItem("username") ||
          "User";
        return { name: username, role: "user" };
      }

      // Initialize user menu
      function initUserMenu() {
        const userInfo = getUserInfo();
        userName.textContent = userInfo.name;

        // Show documents link for lawyers
        if (userInfo.role === "lawyer" || userInfo.role === "attorney") {
          documentsLink.style.display = "flex";
        }
      }

      // Toggle user menu
      userMenuBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        userMenuContent.classList.toggle("hidden");
      });

      // Close menu when clicking outside
      document.addEventListener("click", (e) => {
        if (
          !userMenuBtn.contains(e.target) &&
          !userMenuContent.contains(e.target)
        ) {
          userMenuContent.classList.add("hidden");
        }
      });

      // Documents Library link
      documentsLink.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.href = "/documents";
      });

      // Logout functionality
      logoutBtn.addEventListener("click", (e) => {
        e.preventDefault();
        localStorage.removeItem("authToken");
        window.location.href = "/login";
      });

      // Initialize user menu on page load
      initUserMenu();
    </script>
  </body>
</html>
